(this["webpackJsonpinteractive-map"]=this["webpackJsonpinteractive-map"]||[]).push([[0],{154:function(e,t,a){e.exports=a(304)},179:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(23),o=a.n(i),s=a(16),c=a(25),l=a(149),p=a(143),u=a(91),d=a(95),m=a(13),f=a.n(m),h=a(59),y=a(152),v=a(144),b=a.n(v),g=a(92),_=a(94),x=a(96),E=a(145),T=a.n(E),w=a(3),O=a.n(w),j=a(14),S=a.n(j),k={MONASTERY:"M200 434 c-25 -20 -46 -40 -48 -45 -2 -5 38 -9 92 -9 53 0 96 4 96 8 0 8 -58 59 -85 74 -6 4 -31 -9 -55 -28z M16 351 c-14 -16 -16 -40 -14 -182 l3 -164 152 -3 152 -3 4 58 3 58 2 -57 2 -58 78 0 c47 0 83 5 90 12 8 8 12 60 12 168 0 139 -2 159 -18 173 -10 10 -23 17 -29 17 -21 0 -43 -38 -43 -73 l0 -37 -165 0 -165 0 0 38 c0 25 -7 45 -18 55 -23 21 -25 21 -46 -2z m34 -82 c0 -5 -7 -9 -15 -9 -15 0 -20 12 -9 23 8 8 24 -1 24 -14z m420 0 c0 -5 -7 -9 -15 -9 -15 0 -20 12 -9 23 8 8 24 -1 24 -14z m-178 -116 c10 -9 18 -21 18 -27 0 -6 -7 -1 -15 11 -9 12 -29 23 -48 26 -32 4 -32 4 -3 5 16 1 38 -5 48 -15z M150 320 c0 -43 3 -50 19 -50 15 0 21 8 23 32 4 46 28 49 28 4 0 -32 3 -36 25 -36 22 0 25 4 25 35 0 24 5 35 15 35 10 0 15 -11 15 -35 0 -31 3 -35 25 -35 23 0 25 3 25 50 l0 50 -100 0 -100 0 0 -50z"},C=function(e){var t=e.color,a=e.icon,r=e.size,i=e.translate,o=e.scale,s={svg:{display:"inline-block",verticalAlign:"middle"},path:{fill:t}};return n.a.createElement("svg",{style:s.svg,width:"".concat(r,"px"),height:"".concat(r,"px"),transform:"translate(".concat(i,") scale(").concat(o,")"),viewBox:"0 0 1024 1024"},n.a.createElement("path",{style:s.path,d:a}))};C.defaultProps={color:"#000000",scale:"",translate:"",size:55};var A=C,I=a(150),N=function(e){switch(e){case"Augustinian Canons":return{color:"#ba3d36"};case"Basilians":return{color:"#ca8345"};case"Benedictines":return{color:"#f9f9f9"};case"Cistercians":return{color:"#cabfb3"};case"Cluniacs":return{color:"#ffb404"};case"Knights of the Hospital of Saint Lazarus at Jerusalem":return{color:"#837b52"};case"Knights of the Hospital of Saint John of Jerusalem":return{color:"#617790"};case"Knights Templar":return{color:"#8d8594"};case"Premonstratensian Canons":return{color:"#423c46"};default:return{color:"#fbe5ba"}}},M=function(e){var t=[],a=Math.abs(e),r=Math.floor(a);t.push("".concat(r,"\xba"));var n=Math.floor(60*(a-r));t.push("".concat(n,"'"));var i=Math.round(3600*(a-r-n/60)*1e3)/1e3;return t.push("".concat(i,'"')),t},L=function(e){return e.trim().charAt(0).toUpperCase()+e.slice(1)},z=function(e,t){return e.split(t).map(function(e){return L(e)}).join(", ")},P=a(46),q=(a(167),[{displayText:"Names",fields:[{displayText:"English",path:"properties.english_place_name"},{displayText:"Italian",path:"properties.italian_place_name"},{displayText:"Alternate place names",path:"properties.alternate_place_names"}]},{displayText:"Community and\nPatronage",fields:[{displayText:"Order",path:"properties.order"},{displayText:"Subject of Dedication",path:"properties.dedication"},{displayText:"Gender",path:"properties.gender"},{displayText:"Rank at Foundation",path:"properties.rank_at_foundation"},{displayText:"Mother House To",path:"properties.children"},{displayText:"Subject Of",path:"properties.parent"},{displayText:"Founder(s)",path:"properties.founders"}]},{displayText:"Location",fields:[{displayText:"Longitude and Latitude",path:"geometry.coordinates"},{displayText:"Are These Coordinates Fairly Precise",path:"properties.positional_accuracy_assesment"},{displayText:"Historical Region",path:"properties.historical_province"},{displayText:"Modern Province",path:"properties.province"},{displayText:"Modern Comune",path:"properties.comune"},{displayText:"Location Name Variations",path:"properties.alternate_location_names"},{displayText:"Geonames URI ",path:"properties.location_see_also_uris"},{displayText:"Approximate Elevation in Meters",path:"properties.elevation"}]},{displayText:"Sustainability",fields:[{displayText:"Date(s) Visited",path:"properties.dates_visited"},{displayText:"Does A Structure (Norman or Later) Exist Today?",path:"properties.archaeological_remains"},{displayText:"Seismic Classification According to the Dipartimento della Protezione Civile (2015)\n(on a scale of 1 - 4, with 1 representing the greatest risk for strong seismic activity)",path:"properties.seismic_class_id"},{displayText:"Cultural Stone Stability Index for Observation One",path:"properties.cultural_stone_stability_index_for_observation_one"},{displayText:"Cultural Stone Stability Index for Observation Two",path:"properties.cultural_stone_stability_index_for_observation_two"},{displayText:"Cultural Stone Stability Index for Observation Three",path:"properties.cultural_stone_stability_index_for_observation_three"},{displayText:"Greatest Stone Stability Concerns ",path:"properties.stone_stability_concerns"},{displayText:"Greatest External Threats",path:"properties.stone_external_threats"}]},{displayText:"Attestation",fields:[{displayText:"Types",path:"properties.attestation_types"},{displayText:"Earliest Surviving Record (Minimum Year) ",path:"properties.earliest_attestation_min_year"},{displayText:"Earliest Surviving Record (Maximum Year) ",path:"properties.earliest_attestation_max_year"},{displayText:"Earliest Surviving Record Notes",path:""},{displayText:"Period of First Attestation",path:"properties.reign_of_earliest_attestation_label"}]},{displayText:"Selected Sources\nand Notes",fields:[{displayText:"Sources",path:"properties.place_references"},{displayText:"Notes",path:"properties.notes"}]},{displayText:"Metadata",fields:[{displayText:"Record Status",path:"properties.record_status"},{displayText:"Creation Date",path:"properties.created_at"},{displayText:"Creation By",path:"properties.created_by"},{displayText:"Last Updated on",path:"properties.updated_at"},{displayText:"Updated By",path:"properties.updated_by"}]}]),R=function(e){var t=e.feature,a=function(e,t){if(t)switch(e){case"geometry.coordinates":return n.a.createElement("div",null,n.a.createElement("div",null,t.join(", ")),n.a.createElement("div",null,function(e){var t=e.lat,a=e.lng,r=[];r.push(t>=0?"N":"S");var n=[];return n.push(a>=0?"E":"W"),"".concat(n.concat(M(a)).join(" ")," ").concat(r.concat(M(t)).join(" "))}({lat:t[1],lng:t[0]})));case"properties.positional_accuracy_assessment":return"unknown"===t.toLowerCase()?"No":"Yes (".concat(z(t,"_"),")");case"properties.attestation_types":return z(t,",");case"properties.location_see_also_uris":return Array.isArray(t)?t.map(function(e){return n.a.createElement("div",{key:S.a.uniqueId("location-see-also-uri-")},n.a.createElement("a",{href:"".concat(e)},e))}):n.a.createElement("a",{href:"".concat(t)},t);case"properties.alternate_place_names":case"properties.alternate_location_names":var a=t.map(function(e){return e.name});return a.length>0?a.join(", "):null;case"properties.created_at":case"properties.updated_at":return new Date(t).toLocaleString();case"properties.record_status":return L(t);default:return Array.isArray(t)?t.length>0?t.join(", "):null:t}return null},r=n.a.createElement(P.b,null,q.map(function(e){var t=e.displayText;return n.a.createElement(P.a,{key:S.a.uniqueId("tab-")},n.a.createElement("div",{style:{textAlign:"center"}},t.split("\n").map(function(e){return n.a.createElement("div",{key:S.a.uniqueId("tab-name")},e)})))})),i=q.map(function(e){var r=e.fields;return n.a.createElement(P.c,{key:S.a.uniqueId("tab-panel-")},n.a.createElement("table",null,n.a.createElement("tbody",null,r.map(function(e){var r=e.displayText,i=e.path,o=a(i,S.a.get(t,i)),s=r.split("\n").map(function(e){return n.a.createElement("div",{key:S.a.uniqueId("field-title-")},e)});return o?n.a.createElement("tr",{key:S.a.uniqueId("row-")},n.a.createElement("td",{style:{width:"35%"}},s),n.a.createElement("td",null,o)):null}))))});return n.a.createElement(P.d,null,r,i)},W=function(e){var t=Object(y.a)({},k.defaultProps,function(e){switch(e){case"monastery":return{icon:k.MONASTERY,scale:"1,-1",translate:"-6,-41"};default:return{}}}(e.properties.place_type),N(e.properties.order));return O.a.divIcon({html:b.a.renderToString(n.a.createElement(A,{icon:t.icon,color:t.color,translate:t.translate,scale:t.scale,size:t.size}))})},B=function(){var e=Object(h.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=S.a.get(t,"layer.options.data"))&&o.a.render(n.a.createElement(R,{feature:a}),document.getElementById("feature-popup"));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.sites.map(function(e){var t=S.a.get(e,"geometry.coordinates");if(t){var a=e.properties,r=a.english_place_name,i=a.italian_place_name;return n.a.createElement(g.a,{key:e.id,position:t.reverse(),icon:W(e),data:e},n.a.createElement(_.a,{minWidth:"630",maxWidth:"630",className:"leaflet_popup"},n.a.createElement("div",{id:"feature-popup"})),n.a.createElement(x.a,null,n.a.createElement("span",null,"".concat(i," (").concat(r,")"))))}return null});return n.a.createElement(T.a,{onClick:function(e){return B(e)}},t)},U=Object(s.b)(function(e){return{sites:e.sites}})(D),Y=a(61),F=a(62),G=a(151),J=a(146),Z=a(153),K=a(19),H=a(4),X=a(147),Q=function(){function e(t){Object(Y.a)(this,e),this.sites=t}return Object(F.a)(e,[{key:"search",value:function(){var e=Object(h.a)(f.a.mark(function e(t){var a,r,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.query,r=a.toLowerCase(),!((n=this.sites.filter(function(e){return e.geometry&&e.geometry.coordinates&&e.geometry.coordinates.length>=2&&e.properties.english_place_name.toLowerCase().indexOf(r)>-1}))&&n.length>0)){e.next=5;break}return e.abrupt("return",n.map(function(e){return{x:e.geometry.coordinates[1],y:e.geometry.coordinates[0],label:e.properties.english_place_name}}));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),V=function(e){function t(){return Object(Y.a)(this,t),Object(G.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(F.a)(t,[{key:"initProvider",value:function(e){this.provider=new Q(e)}},{key:"createLeafletElement",value:function(e){var t=e.sites;return this.initProvider(t),Object(X.GeoSearchControl)({provider:this.provider,showMarker:!1,showPopup:!0,searchLabel:"search",autoClose:!0,keepResult:!0})}}]),t}(K.a),$=Object(H.d)(V),ee=Object(s.b)(function(e){return{sites:e.sites}})($),te=a(93),ae=function(e){var t=e.sites;if(e.loading)return n.a.createElement("div",null,"Loading...");var a=function(e){var t=e.reduce(function(e,t){if(t.properties.order&&t.properties.order.length>0){var a=t.properties.order;a.endsWith("?")||e.has(a)||e.add(a)}return e},new Set(["Unknown"]));return Object(I.a)(t).sort(function(e,t){return e.localeCompare(t)})}(t).map(function(e){return n.a.createElement("li",{key:e},n.a.createElement("span",{style:{background:Object.values(N(e)).toString()}}),e)});return n.a.createElement(te.a,null,n.a.createElement("div",{className:"map-legend"},n.a.createElement("div",{className:"legend-scale"},n.a.createElement("ul",{className:"legend-labels"},a))))},re=Object(s.b)(function(e){return{loading:e.loading,sites:e.sites}})(ae),ne={centerPoint:[37.73,14.2],initialZoom:8,maxZoom:18,tileURL:"https://api.mapbox.com/styles/v1/norman-sicily-project/cjmm4r23s7n2b2rs0tq0a9rw0/tiles/256/{z}/{x}/{y}@2x?access_token=",mapAttribution:"<a href=&quot;https://www.mapbox.com/about/maps/&quot;>\xa9 Mapbox</a> <a href=&quot;http://www.openstreetmap.org/copyright&quot;>\xa9 OpenStreetMap</a>",dataFile:"places-20191008.geojson"},ie={MAPBOX_ACCESS_TOKEN:"pk.eyJ1Ijoibm9ybWFuLXNpY2lseS1wcm9qZWN0IiwiYSI6ImNqbW00Y3RtbTA2cjUzcWtnNzVncnNpd2gifQ.Sk1EC4ARXkkm8C1YQCl08A"},oe=function(e){return e.loading?n.a.createElement("div",null,"Loading..."):n.a.createElement("div",null,n.a.createElement(u.a,{center:ne.centerPoint,zoom:ne.initialZoom,maxZoom:ne.maxZoom},n.a.createElement(d.a,{url:ne.tileURL+ie.MAPBOX_ACCESS_TOKEN,attribution:ne.mapAttribution}),n.a.createElement(U,null),n.a.createElement(ee,null),n.a.createElement(re,null)))},se=Object(s.b)(function(e){return{loading:e.loading}})(oe),ce="INIT_MAP",le="LOAD_SITES_BEGIN",pe="LOAD_SITES_SUCCESS",ue="LOAD_SITES_SUCCESS";function de(){return{type:ce}}a(179);var me=Object(s.b)(function(e){return{initMap:function(){e(de())}}})(function(){return n.a.createElement(se,null)}),fe=a(18),he={loading:!1,sites:[]};var ye=a(31),ve=a(148),be=a.n(ve),ge=f.a.mark(Ee),_e=f.a.mark(Te),xe=f.a.mark(we);function Ee(){var e,t,a,r,n;return f.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return"/places/map/data",e="".concat("/places/map/data","/").concat(ne.dataFile),i.prev=2,i.next=5,Object(ye.c)({type:le});case 5:return i.next=7,Object(ye.b)(fetch,e);case 7:return t=i.sent,i.next=10,t.json();case 10:return a=i.sent,r=a.features?a.features:[],n=r.map(function(e){return be()("id",S.a.uniqueId("site_"),e)}),i.next=15,Object(ye.c)({type:pe,sites:n});case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(2),i.next=21,Object(ye.c)({type:ue,error:i.t0.message});case 21:case"end":return i.stop()}},ge,null,[[2,17]])}function Te(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.d)(ce,function(){return Ee()});case 2:case"end":return e.stop()}},_e)}function we(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.a)([Te()]);case 2:case"end":return e.stop()}},xe)}var Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Se=Object(l.a)(),ke=Object(p.composeWithDevTools)({}),Ce=Object(c.createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(fe.cloneDeep)(e);case le:return Object(fe.set)("loading",!0,e);case pe:return Object(fe.compose)(Object(fe.set)("loading",!1),Object(fe.set)("sites",t.sites),Object(fe.unset)("error"))(e);case ue:return Object(fe.compose)(Object(fe.set)("loading",!1),Object(fe.set)("error",t.error),Object(fe.set)("sites",[]));default:return e}},ke(Object(c.applyMiddleware)(Se)));Se.run(we),Object(i.render)(n.a.createElement(s.a,{store:Ce},n.a.createElement(me,null)),document.getElementById("root")),Ce.dispatch(de()),function(){if("serviceWorker"in navigator){if(new URL("/places/map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/places/map","/service-worker.js");Oe?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):je(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):je(e)})}}()}},[[154,1,2]]]);
//# sourceMappingURL=main.11dbc7b4.chunk.js.map